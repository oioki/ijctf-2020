#!/usr/bin/env python3

key = [
    0x89, 0x27, 0xbd, 0x8d,    0x8d, 0xfa, 0x8c, 0xeb,
    0x77, 0xdb, 0xee, 0xa0,    0x8b, 0x32, 0x0c, 0x3d,
    0x3d, 0x87, 0x9a, 0xb3,    0x9e, 0x1a, 0x73, 0xe3,
    0xa1, 0x3d, 0xe2, 0x16,    0x90, 0x2e, 0xfc, 0xf5,
    0xd3, 0x3a, 0x87, 0x84,    0x3d, 0xf1, 0x74, 0xc0,
]


# decrypt with correct key
i = 0
decrypted = []

bytes = open("flag.jpg.enc", "rb").read()
for byte in bytes:
    decrypted.append(byte ^ key[i % 40])
    i += 1

with open("flag.jpg", "w+b") as f:
    f.write(bytearray(decrypted))
